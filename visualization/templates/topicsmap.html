{% extends "base.html" %}
{% block head %}
<link href="/static/topicsmap.css" rel="stylesheet">
<script src="/static/topicsmap.js"></script>
<script>
var nodes = [{% for vertex in vertices %}
  {'category': 'category', 'name': '{{ vertex['name'] }}', 'link': '{{vertex['link']}}','fullname': '{{vertex['fullname']}}', 'desc':'{{vertex['desc']}}' },{% endfor %}
];
var edges = [{% for edge in edges %}
  {'source': {{ edge.from_v }}, 'target': {{ edge.to_v }}, 'thickness': {{ edge.weight}} },{% endfor %}
];
var categories = {{ categories_json | safe }};
var colors = {{ colors_json | safe }};
</script>
{% endblock %}
{% block content %}
<body onload="drawD3Document(nodes,edges)">
  <section class="col-md-9">
    <div id="canvas-svg"></div>
  </section>
  <aside class="col-md-3 info">
    <h1 class="title"> BIDS IEM Visualization </h1>
    <div class="info-blurb">
      <h3 class="subtitle">Topics</h2>
    </div>
    <div class="form-group has-feedback">
      <input type="text" class="form-control " id="search" data-provide="typeahead" />
      <i class="glyphicon glyphicon-search form-control-feedback"></i>
      </div>
    <ul>
      {% for category in categories %}
      <li onclick="catColorAlpha('{{ category }}')">
        <div class="color-label col-md-2"><span class="color-box" style="background-color:rgb({{ ','.join(colors[category]) }})"></span></div>
        <div class="text-label col-md-10"><span>{{ category }}</span></div>
      </li>
      {% endfor %}
    </ul>
    <h3 id="focusname"></h3>
    <p id="focusdesc"> </p>
    <a id="focushref" href="#"></a>
  </aside>
</body>
{% endblock %}
